<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Parliamentary Service of Ghana Library</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" type="image/png" href="images/Ghana_Parliament_Emblem.png">
</head>
<body class="admin-dashboard">
    <!-- Admin Sidebar -->
    <aside class="admin-sidebar">
        <div class="admin-brand">
            <a href="login.html" class="admin-logo">
                <img src="images/Ghana_Parliament_Emblem.png" alt="Parliamentary Service Logo">
            </a>
            <h2>Library Admin</h2>
                </div>
        <nav class="admin-nav">
            <div class="nav-section">
                <div class="nav-section-title">Main</div>
                <a href="admin-dashboard.html" class="nav-link active">
                    <i class="fas fa-home"></i>
                    Dashboard
                </a>
                <a href="admin-books.html" class="nav-link">
                    <i class="fas fa-book"></i>
                    Books
                    <span class="badge">12</span>
                </a>
                <a href="admin-members.html" class="nav-link">
                    <i class="fas fa-users"></i>
                    Members
                </a>
                <a href="admin-gallery.html" class="nav-link">
                    <i class="fas fa-images"></i>
                    Gallery
                </a>
                <a href="admin-categories.html" class="nav-link">
                    <i class="fas fa-bookmark"></i>
                    Categories
                </a>
            </div>
            <div class="nav-section">
                <div class="nav-section-title">Management</div>
                <a href="admin-circulation.html" class="nav-link">
                    <i class="fas fa-exchange-alt"></i>
                    Circulation
                </a>
                <a href="admin-reports.html" class="nav-link">
                    <i class="fas fa-file-alt"></i>
                    Reports
                </a>
                <a href="admin-settings.html" class="nav-link">
                    <i class="fas fa-cog"></i>
                    Settings
                </a>
            </div>
            </nav>
        </aside>

    <!-- Main Content -->
    <main class="admin-main">
        <!-- Header -->
        <header class="admin-header">
            <div class="header-left">
                <button class="menu-toggle" aria-label="Toggle Menu">
                    <i class="fas fa-bars"></i>
                    </button>
                <div class="page-title">
                    <h1>Dashboard</h1>
                    <p>Welcome back, Administrator</p>
                </div>
                </div>
            <div class="admin-actions">
                <button class="btn btn-outline">
                    <i class="fas fa-bell"></i>
                    Notifications
                </button>
                <button class="btn btn-outline">
                    <i class="fas fa-user"></i>
                    Profile
                    </button>
                        </div>
        </header>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon primary">
                        <i class="fas fa-book"></i>
                    </div>
                </div>
                <div class="stat-value">2,847</div>
                <div class="stat-label">Total Books</div>
                <div class="stat-change up">
                    <i class="fas fa-arrow-up"></i>
                    12% from last month
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon success">
                        <i class="fas fa-users"></i>
                    </div>
                </div>
                <div class="stat-value">1,234</div>
                <div class="stat-label">Active Members</div>
                <div class="stat-change up">
                    <i class="fas fa-arrow-up"></i>
                    8% from last month
                </div>
                        </div>
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon warning">
                        <i class="fas fa-book-reader"></i>
                    </div>
                </div>
                <div class="stat-value">156</div>
                <div class="stat-label">Books Checked Out</div>
                <div class="stat-change down">
                    <i class="fas fa-arrow-down"></i>
                    3% from last month
                </div>
                        </div>
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon danger">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                </div>
                <div class="stat-value">23</div>
                <div class="stat-label">Overdue Books</div>
                <div class="stat-change up">
                    <i class="fas fa-arrow-up"></i>
                    5% from last month
                        </div>
                    </div>
                </div>

        <!-- Recent Activity and Quick Actions -->
        <div class="grid-container" style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem;">
            <!-- Recent Activity -->
            <div class="card">
                <div class="card-header">
                        <h3>Recent Activity</h3>
                    <div class="card-header-actions">
                        <button class="btn btn-outline">View All</button>
                    </div>
                </div>
                <div class="card-body">
                    <ul class="activity-feed">
                        <li class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-header">
                                    <h4 class="activity-title">New Book Added</h4>
                                    <span class="activity-time">2 hours ago</span>
                                </div>
                                <p class="activity-desc">"The History of Ghana Parliament" was added to the collection</p>
                            </div>
                        </li>
                        <li class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-header">
                                    <h4 class="activity-title">New Member Registration</h4>
                                    <span class="activity-time">4 hours ago</span>
                                </div>
                                <p class="activity-desc">John Doe registered as a new library member</p>
                            </div>
                        </li>
                        <li class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-book-reader"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-header">
                                    <h4 class="activity-title">Book Checked Out</h4>
                                    <span class="activity-time">5 hours ago</span>
                                </div>
                                <p class="activity-desc">"Constitutional Law in Ghana" was checked out by Jane Smith</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="card">
                <div class="card-header">
                    <h3>Quick Actions</h3>
                        </div>
                <div class="card-body">
                    <div style="display: flex; flex-direction: column; gap: 1rem;">
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            Add New Book
                        </button>
                        <button class="btn btn-outline">
                            <i class="fas fa-book-reader"></i>
                            Check Out Book
                        </button>
                        <button class="btn btn-outline">
                            <i class="fas fa-undo"></i>
                            Return Book
                        </button>
                    </div>
                </div>
            </div>

        <!-- Digital Access Uploads Card -->
        <div class="card" style="margin-top:2rem;">
            <div class="card-header">
                <h3>Digital Access Uploads</h3>
            </div>
            <div class="card-body">
                <form id="digitalUploadForm" style="display:flex; flex-direction:column; gap:1rem;">
                    <div>
                        <label for="uploadTitle" style="font-weight:600;">Title *</label>
                        <input type="text" id="uploadTitle" name="title" required style="width:100%;padding:0.7rem;border-radius:0.5rem;border:1px solid #e5e7eb;">
                    </div>
                    <div>
                        <label for="uploadDescription" style="font-weight:600;">Description</label>
                        <textarea id="uploadDescription" name="description" rows="2" style="width:100%;padding:0.7rem;border-radius:0.5rem;border:1px solid #e5e7eb;"></textarea>
                    </div>
                    <div>
                        <label for="uploadCategory" style="font-weight:600;">Category</label>
                        <select id="uploadCategory" name="category" style="width:100%;padding:0.7rem;border-radius:0.5rem;border:1px solid #e5e7eb;">
                            <option value="">Select category</option>
                            <option value="bills">Bills</option>
                            <option value="reports">Reports</option>
                            <option value="hansards">Hansards</option>
                            <option value="research">Research</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label for="uploadFile" style="font-weight:600;">File *</label>
                        <input type="file" id="uploadFile" name="file" required accept=".pdf,.doc,.docx" style="width:100%;">
                        <small id="fileHelp" style="color:#888;">Accepted: PDF, DOC, DOCX. Max size: 10MB.</small>
                    </div>
                    <div id="uploadProgress" style="display:none; width:100%; background:#e5e7eb; border-radius:0.5rem; height:8px; margin-bottom:0.5rem;">
                        <div id="uploadBar" style="height:8px; background:#137547; width:0%; border-radius:0.5rem;"></div>
                    </div>
                    <div id="uploadAlert" role="alert" style="display:none; margin-bottom:0.5rem; font-weight:600;"></div>
                    <button type="submit" class="btn btn-primary" style="width:100%;">Upload</button>
                </form>
                <div id="digitalUploadThankYou" style="display:none;text-align:center;color:#137547;font-weight:600;margin-top:1.5rem;font-size:1.1rem;">Upload successful! Your digital content is ready for review.</div>
                <div id="digitalUploadsTableContainer" style="margin-top:2rem;">
                    <h4 style="margin-bottom:1rem;">Uploaded Files</h4>
                    <div class="table-responsive">
                        <table id="digitalUploadsTable" style="width:100%; border-collapse:collapse;">
                        <thead>
                                <tr style="background:#f8f9fa;">
                                <th>Title</th>
                                <th>Category</th>
                                    <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                                <!-- Populated by JS -->
                        </tbody>
                    </table>
                    </div>
                </div>
            </div>
        </div>
        <script>
        // Digital upload demo data
        let digitalUploads = [];

        function renderUploadsTable() {
            const tbody = document.querySelector('#digitalUploadsTable tbody');
            tbody.innerHTML = '';
            if (digitalUploads.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align:center;color:#888;">No uploads yet.</td></tr>';
                return;
            }
            digitalUploads.forEach((item, idx) => {
                tbody.innerHTML += `
                    <tr>
                        <td>${item.title}</td>
                        <td>${item.category || '-'}</td>
                        <td>${item.date}</td>
                        <td>
                            <span class="status-badge ${item.published ? 'status-published' : 'status-pending'}">${item.published ? 'Published' : 'Unpublished'}</span>
                        </td>
                        <td style="display:flex;gap:0.5rem;justify-content:center;">
                            <button class="btn btn-outline" title="Download" onclick="alert('Download not implemented in demo')"><i class="fas fa-download"></i></button>
                            <button class="btn btn-outline" title="Edit" onclick="editUpload(${idx})"><i class="fas fa-edit"></i></button>
                            <button class="btn btn-outline" title="Delete" onclick="deleteUpload(${idx})"><i class="fas fa-trash"></i></button>
                            <button class="btn btn-outline" title="Toggle Publish" onclick="togglePublish(${idx})"><i class="fas fa-bullhorn"></i></button>
                        </td>
                            </tr>
                `;
            });
        }

        function editUpload(idx) {
            const item = digitalUploads[idx];
            document.getElementById('uploadTitle').value = item.title;
            document.getElementById('uploadDescription').value = item.description;
            document.getElementById('uploadCategory').value = item.category;
            // File cannot be edited in demo
            digitalUploads.splice(idx, 1);
            renderUploadsTable();
        }
        function deleteUpload(idx) {
            if (confirm('Delete this upload?')) {
                digitalUploads.splice(idx, 1);
                renderUploadsTable();
            }
        }
        function togglePublish(idx) {
            digitalUploads[idx].published = !digitalUploads[idx].published;
            renderUploadsTable();
        }

        const digitalUploadForm = document.getElementById('digitalUploadForm');
        const digitalUploadThankYou = document.getElementById('digitalUploadThankYou');
        const uploadAlert = document.getElementById('uploadAlert');
        const uploadProgress = document.getElementById('uploadProgress');
        const uploadBar = document.getElementById('uploadBar');

        if (digitalUploadForm && digitalUploadThankYou) {
            digitalUploadForm.addEventListener('submit', function(e) {
                e.preventDefault();
                // Validation
                const fileInput = document.getElementById('uploadFile');
                const file = fileInput.files[0];
                if (!file) {
                    showAlert('Please select a file.', 'red');
                    return;
                }
                const allowed = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
                if (!allowed.includes(file.type)) {
                    showAlert('Invalid file type. Only PDF, DOC, DOCX allowed.', 'red');
                    return;
                }
                if (file.size > 10 * 1024 * 1024) {
                    showAlert('File too large. Max 10MB.', 'red');
                    return;
                }
                // Simulate upload progress
                uploadProgress.style.display = 'block';
                uploadBar.style.width = '0%';
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 20;
                    uploadBar.style.width = progress + '%';
                    if (progress >= 100) {
                        clearInterval(interval);
                        uploadProgress.style.display = 'none';
                        // Add to uploads
                        digitalUploads.unshift({
                            title: document.getElementById('uploadTitle').value,
                            description: document.getElementById('uploadDescription').value,
                            category: document.getElementById('uploadCategory').value,
                            date: new Date().toLocaleDateString(),
                            published: false
                        });
                        renderUploadsTable();
                        digitalUploadForm.reset();
                        digitalUploadThankYou.style.display = 'block';
                        setTimeout(() => {
                            digitalUploadThankYou.style.display = 'none';
                            digitalUploadForm.style.display = 'flex';
                        }, 2000);
                    }
                }, 200);
            });
        }
        function showAlert(msg, color) {
            uploadAlert.textContent = msg;
            uploadAlert.style.display = 'block';
            uploadAlert.style.color = color;
            setTimeout(() => { uploadAlert.style.display = 'none'; }, 2500);
        }
        // Initial render
        renderUploadsTable();
        </script>

        <!-- Recent Books Table -->
        <div class="card">
            <div class="card-header">
                <h3>Recent Books</h3>
                <div class="card-header-actions">
                    <button class="btn btn-outline" onclick="window.location.href='admin-books.html'">View All Books</button>
                </div>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Author</th>
                                <th>Category</th>
                                <th>Status</th>
                                <th>Added Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>The History of Ghana Parliament</td>
                                <td>John Smith</td>
                                <td>History</td>
                                <td><span class="status-badge status-published">Available</span></td>
                                <td>2024-03-15</td>
                            </tr>
                            <tr>
                                <td>Constitutional Law in Ghana</td>
                                <td>Mary Johnson</td>
                                <td>Law</td>
                                <td><span class="status-badge status-pending">Checked Out</span></td>
                                <td>2024-03-14</td>
                            </tr>
                            <tr>
                                <td>Parliamentary Procedures</td>
                                <td>Robert Brown</td>
                                <td>Politics</td>
                                <td><span class="status-badge status-published">Available</span></td>
                                <td>2024-03-13</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                </div>
            </div>
        </main>

    <!-- Quick Actions Modals -->
    <div id="adminModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); z-index:9999; align-items:center; justify-content:center;">
      <div id="adminModalContent" style="background:#fff; border-radius:1rem; max-width:400px; width:90%; padding:2rem; position:relative; box-shadow:0 8px 32px rgba(0,0,0,0.18);">
        <button id="closeAdminModal" style="position:absolute; top:1rem; right:1rem; background:none; border:none; font-size:1.5rem; cursor:pointer;">&times;</button>
        <div id="adminModalFormContainer"></div>
        </div>
    </div>
    <script>
    const quickActions = [
      {
        btn: '.btn.btn-primary',
        title: 'Add New Book',
        form: `<form id='addBookForm' style='display:flex;flex-direction:column;gap:1rem;'>
          <h3>Add New Book</h3>
          <input type='text' name='title' placeholder='Title' required style='padding:0.7rem;border-radius:0.5rem;border:1px solid #e5e7eb;'>
          <input type='text' name='author' placeholder='Author' required style='padding:0.7rem;border-radius:0.5rem;border:1px solid #e5e7eb;'>
          <input type='text' name='category' placeholder='Category' style='padding:0.7rem;border-radius:0.5rem;border:1px solid #e5e7eb;'>
          <button type='submit' class='btn btn-primary'>Add Book</button>
        </form>`
      },
      {
        btn: '.btn.btn-outline:nth-of-type(2)',
        title: 'Register Member',
        form: `<form id='registerMemberForm' style='display:flex;flex-direction:column;gap:1rem;'>
          <h3>Register Member</h3>
          <input type='text' name='name' placeholder='Full Name' required style='padding:0.7rem;border-radius:0.5rem;border:1px solid #e5e7eb;'>
          <input type='email' name='email' placeholder='Email' required style='padding:0.7rem;border-radius:0.5rem;border:1px solid #e5e7eb;'>
          <button type='submit' class='btn btn-primary'>Register</button>
        </form>`
      },
      {
        btn: '.btn.btn-outline:nth-of-type(3)',
        title: 'Check Out Book',
        form: `<form id='checkoutBookForm' style='display:flex;flex-direction:column;gap:1rem;'>
          <h3>Check Out Book</h3>
          <input type='text' name='book' placeholder='Book Title' required style='padding:0.7rem;border-radius:0.5rem;border:1px solid #e5e7eb;'>
          <input type='text' name='member' placeholder='Member Name' required style='padding:0.7rem;border-radius:0.5rem;border:1px solid #e5e7eb;'>
          <button type='submit' class='btn btn-primary'>Check Out</button>
        </form>`
      },
      {
        btn: '.btn.btn-outline:nth-of-type(4)',
        title: 'Return Book',
        form: `<form id='returnBookForm' style='display:flex;flex-direction:column;gap:1rem;'>
          <h3>Return Book</h3>
          <input type='text' name='book' placeholder='Book Title' required style='padding:0.7rem;border-radius:0.5rem;border:1px solid #e5e7eb;'>
          <input type='text' name='member' placeholder='Member Name' required style='padding:0.7rem;border-radius:0.5rem;border:1px solid #e5e7eb;'>
          <button type='submit' class='btn btn-primary'>Return</button>
        </form>`
      }
    ];
    const adminModal = document.getElementById('adminModal');
    const adminModalContent = document.getElementById('adminModalContent');
    const adminModalFormContainer = document.getElementById('adminModalFormContainer');
    const closeAdminModal = document.getElementById('closeAdminModal');
    quickActions.forEach((action, i) => {
      const btn = document.querySelector(action.btn);
      if (btn) {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          adminModal.style.display = 'flex';
          adminModalFormContainer.innerHTML = action.form;
          const form = adminModalFormContainer.querySelector('form');
          form.addEventListener('submit', function(ev) {
            ev.preventDefault();
            form.style.display = 'none';
            adminModalFormContainer.innerHTML += `<div style='text-align:center;color:#137547;font-weight:600;margin-top:1.5rem;font-size:1.1rem;'>Success! Action completed.</div>`;
            setTimeout(() => { adminModal.style.display = 'none'; adminModalFormContainer.innerHTML = ''; }, 2000);
          });
        });
      }
    });
    closeAdminModal.addEventListener('click', function() {
      adminModal.style.display = 'none';
      adminModalFormContainer.innerHTML = '';
    });
    window.addEventListener('keydown', function(e) {
      if(e.key === 'Escape') adminModal.style.display = 'none';
    });
    </script>

    <!-- Profile Modal -->
    <div id="profileModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); z-index:9999; align-items:center; justify-content:center;">
      <div style="background:#fff; border-radius:1rem; max-width:350px; width:90%; padding:2rem; position:relative; box-shadow:0 8px 32px rgba(0,0,0,0.18); text-align:center;">
        <button id="closeProfileModal" style="position:absolute; top:1rem; right:1rem; background:none; border:none; font-size:1.5rem; cursor:pointer;">&times;</button>
        <div style="margin-bottom:1.5rem;">
          <i class="fas fa-user-circle" style="font-size:3rem;color:#137547;"></i>
          <div style="font-weight:700;font-size:1.2rem;margin-top:0.5rem;">Admin User</div>
          <div style="color:#888;font-size:0.97rem;">admin@parliament.gh</div>
        </div>
        <a href="admin-settings.html" class="btn btn-outline" style="width:100%;margin-bottom:0.7rem;">View Profile & Settings</a>
        <button class="btn btn-outline logout-btn" style="width:100%;">Logout</button>
        </div>
    </div>
    <script>
    const profileBtn = document.querySelector('.admin-actions .btn.btn-outline:last-child');
    const profileModal = document.getElementById('profileModal');
    const closeProfileModal = document.getElementById('closeProfileModal');
    if(profileBtn && profileModal && closeProfileModal) {
      profileBtn.addEventListener('click', function(e) {
        e.preventDefault();
        profileModal.style.display = 'flex';
      });
      closeProfileModal.addEventListener('click', function() {
        profileModal.style.display = 'none';
      });
      window.addEventListener('keydown', function(e) {
        if(e.key === 'Escape') profileModal.style.display = 'none';
      });
    }
    </script>

    <!-- Notifications Modal -->
    <div id="notificationsModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); z-index:9999; align-items:center; justify-content:center;">
      <div style="background:#fff; border-radius:1rem; max-width:400px; width:90%; padding:2rem; position:relative; box-shadow:0 8px 32px rgba(0,0,0,0.18);">
        <button id="closeNotificationsModal" style="position:absolute; top:1rem; right:1rem; background:none; border:none; font-size:1.5rem; cursor:pointer;">&times;</button>
        <h3 style="margin-bottom:1rem;">Notifications</h3>
        <div style="display:flex;gap:0.5rem;justify-content:space-between;margin-bottom:1rem;">
          <button id="markAllReadBtn" class="btn btn-outline" style="font-size:0.95rem;padding:0.3rem 0.8rem;">Mark all as read</button>
          <button id="clearAllBtn" class="btn btn-outline" style="font-size:0.95rem;padding:0.3rem 0.8rem;">Clear all</button>
        </div>
        <ul id="notificationsList" style="list-style:none;padding:0;margin:0;max-height:300px;overflow-y:auto;">
          <!-- Populated by JS -->
        </ul>
        <div id="noNotificationsMsg" style="text-align:center;color:#888;font-size:0.97rem;display:none;">No notifications</div>
        </div>
    </div>
    <script>
    // Demo notifications data
    let notifications = [
      {icon:'fa-book', color:'#137547', text:'New book added: <b>The History of Ghana Parliament</b>', time:'2h ago', unread:true},
      {icon:'fa-user', color:'#27ae60', text:'New member registered: <b>John Doe</b>', time:'4h ago', unread:true},
      {icon:'fa-exclamation-circle', color:'#c1272d', text:'Overdue book: <b>Constitutional Law in Ghana</b>', time:'5h ago', unread:true}
    ];
    function renderNotifications() {
      const list = document.getElementById('notificationsList');
      const noMsg = document.getElementById('noNotificationsMsg');
      list.innerHTML = '';
      if (notifications.length === 0) {
        noMsg.style.display = 'block';
        return;
      }
      noMsg.style.display = 'none';
      notifications.forEach((n, i) => {
        list.innerHTML += `<li style="margin-bottom:1rem;display:flex;align-items:center;gap:0.7rem;opacity:${n.unread?1:0.5};background:${n.unread?'#f8f9fa':'none'};padding:0.5rem 0.5rem 0.5rem 0;border-radius:0.5rem;">
          <i class="fas ${n.icon}" style="color:${n.color};font-size:1.2rem;"></i>
          <span style="flex:1;">${n.text}<br><span style='color:#888;font-size:0.9em;'>${n.time}</span></span>
          <button onclick="markRead(${i})" aria-label="Mark as read" style="background:none;border:none;color:#137547;font-size:1.1rem;cursor:pointer;${n.unread?'':'display:none;'}">&#10003;</button>
        </li>`;
      });
    }
    function markRead(idx) {
      notifications[idx].unread = false;
      renderNotifications();
      updateBellBadge();
    }
    document.getElementById('markAllReadBtn').onclick = function() {
      notifications.forEach(n=>n.unread=false);
      renderNotifications();
      updateBellBadge();
    };
    document.getElementById('clearAllBtn').onclick = function() {
      notifications = [];
      renderNotifications();
      updateBellBadge();
    };
    function updateBellBadge() {
      const unread = notifications.filter(n=>n.unread).length;
      let bell = document.querySelector('.admin-actions .btn.btn-outline:first-child');
      let badge = bell.querySelector('.notif-badge');
      if (!badge) {
        badge = document.createElement('span');
        badge.className = 'notif-badge';
        badge.style.cssText = 'position:absolute;top:6px;right:8px;background:#c1272d;color:#fff;border-radius:50%;font-size:0.7rem;padding:2px 6px;line-height:1;';
        bell.style.position = 'relative';
        bell.appendChild(badge);
      }
      badge.textContent = unread>0?unread:'';
      badge.style.display = unread>0?'inline-block':'none';
    }
    // Modal logic
    const notificationsBtn = document.querySelector('.admin-actions .btn.btn-outline:first-child');
    const notificationsModal = document.getElementById('notificationsModal');
    const closeNotificationsModal = document.getElementById('closeNotificationsModal');
    if(notificationsBtn && notificationsModal && closeNotificationsModal) {
      notificationsBtn.addEventListener('click', function(e) {
        e.preventDefault();
        notificationsModal.style.display = 'flex';
        renderNotifications();
      });
      closeNotificationsModal.addEventListener('click', function() {
        notificationsModal.style.display = 'none';
      });
      window.addEventListener('keydown', function(e) {
        if(e.key === 'Escape') notificationsModal.style.display = 'none';
      });
    }
    updateBellBadge();
    </script>

    <!-- Quick Links Card -->
    <div class="card" style="margin-top:2rem;">
      <div class="card-header">
        <h3>Quick Links</h3>
      </div>
      <div class="card-body">
        <ul style="list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:1rem;">
          <li><a href="catalog.html" class="btn btn-outline" target="_blank" style="width:100%;text-align:left;text-decoration: none;">Digital Catalog</a></li>
          <li><a href="reports.html" class="btn btn-outline" target="_blank" style="width:100%;text-align:left;text-decoration: none;">Parliamentary Documents</a></li>
          <li><a href="research-services.html" class="btn btn-outline" target="_blank" style="width:100%;text-align:left;text-decoration: none;">Research Support Services</a></li>
          <li><a href="#" class="btn btn-outline" style="width:100%;text-align:left;text-decoration: none;">Library Policies</a></li>
          <li><a href="#" class="btn btn-outline" style="width:100%;text-align:left;text-decoration: none;">User Guides</a></li>
        </ul>
      </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Check authentication
            const isAuthenticated = sessionStorage.getItem('isAuthenticated');
            if (!isAuthenticated) {
                window.location.href = 'login.html';
                return;
            }

            // Check admin role
            const user = JSON.parse(sessionStorage.getItem('user') || '{}');
            if (!user.role === 'admin') {
                window.location.href = '/unauthorized.html';
                return;
            }

            // Load user info
            if (user.name) {
                const greeting = document.querySelector('.admin-greeting');
                if (greeting) {
                    greeting.textContent = `Welcome back, ${user.name}`;
                }
            }

            // Update UI based on user role
            if (user.role === 'librarian') {
                // Hide admin-only elements
                const adminElements = document.querySelectorAll('.admin-only');
                adminElements.forEach(el => el.style.display = 'none');
            }
        });
    </script>
</body>
</html>


